---
const links = [
    { text: "Videos", href: "/" },
    { text: "News", href: "#" },
    { text: "Shop", href: "#" },
    { text: "Search", href: "#" },
];
---

<header
    class="fixed top-0 left-0 w-full z-50 mix-blend-difference text-white py-6 px-4 md:px-8 flex justify-between items-center pointer-events-none"
>
    {/* Logo with Scramble Effect */}
    <a href="/" class="pointer-events-auto group relative">
        <h1
            class="font-black text-xl md:text-2xl tracking-tighter uppercase"
            data-scramble="JOHAN TOAST"
        >
            JOHAN TOAST
        </h1>
    </a>

    {/* Navigation */}
    <nav class="pointer-events-auto hidden md:flex space-x-8">
        {
            links.map((link) => (
                <a
                    href={link.href}
                    class="text-sm font-bold uppercase tracking-widest hover:text-[#ff208a] transition-colors relative group-nav"
                >
                    {link.text}
                    {/* Strikethrough/Underline effect */}
                    <span class="absolute left-0 bottom-0 w-full h-[1px] bg-white scale-x-0 group-nav-hover:scale-x-100 transition-transform duration-300 origin-right hover:origin-left" />
                </a>
            ))
        }
    </nav>

    {/* Mobile Menu Button (Placeholder) */}
    <button
        class="pointer-events-auto md:hidden text-sm font-bold uppercase tracking-widest"
    >
        Menu
    </button>
</header>

<script>
    // Scramble Effect Logic
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    const elements = document.querySelectorAll("[data-scramble]");

    elements.forEach((element) => {
        // Cast to HTMLElement to access .innerText/textContent safely in TS
        const el = element as HTMLElement;
        let interval: any = null;
        const originalText =
            el.getAttribute("data-scramble") || el.textContent || "";

        el.addEventListener("mouseover", (event) => {
            let iteration = 0;

            clearInterval(interval);

            interval = setInterval(() => {
                const target = event.target as HTMLElement; // Explicit cast
                target.innerText = originalText
                    .split("")
                    .map((letter, index) => {
                        if (index < iteration) {
                            return originalText[index];
                        }

                        return letters[Math.floor(Math.random() * 36)];
                    })
                    .join("");

                if (iteration >= originalText.length) {
                    clearInterval(interval);
                }

                iteration += 1 / 3; // Speed control
            }, 30);
        });
    });
</script>
